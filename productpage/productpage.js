const products = {
  shoe1: {
    typeofprod:"Running",
    prodname:"RESPONSE RUNNER SHOES",
    prodprice:"₹5599.00",
    colors: [{
      thumbnail:"/Assets/shoes1/colors/Black.avif",
      video: "/Assets/shoes1/video1.webm",
      images: [
        "/Assets/shoes1/pic1.jpg",
        "/Assets/shoes1/pic2.jpg",
        "/Assets/shoes1/pic3.jpg",
        "/Assets/shoes1/pic4.jpg"
      ]
    },
    {
      thumbnail:"/Assets/shoes1/colors/Grey.avif",
      images:[
        "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/86d116aad38341069b9a8a9c00f149ab_9366/Response_Runner_Shoes_Grey_IH3578_01_standard.jpg",
        "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/0fa4e5659620488ab45aff92facd2ba0_9366/Response_Runner_Shoes_Grey_IH3578_02_standard_hover.jpg",
        "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/a22e9b59e1cb4bddb2f9637b342083ed_9366/Response_Runner_Shoes_Grey_IH3578_03_standard.jpg",
        "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/71443301b50c43fa8f55fd6b446572b8_9366/Response_Runner_Shoes_Grey_IH3578_04_standard.jpg"
        ]
      },
      {
        thumbnail:"/Assets/shoes1/colors/Blue.avif",
        images:[
          "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/eed29dcae8984ef3a113bd8806fa863b_9366/Response_Runner_Shoes_Blue_IH3580_01_standard.jpg",
          "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/a0db872f11f84b2295d430955c96b5c1_9366/Response_Runner_Shoes_Blue_IH3580_02_standard_hover.jpg",
          "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/1089104b7cbe4dd3b5f2fb5656d54ad6_9366/Response_Runner_Shoes_Blue_IH3580_03_standard.jpg",
          "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/3ac4b37a0d9d4ec0b1c375996612aa15_9366/Response_Runner_Shoes_Blue_IH3580_04_standard.jpg",
      ]
      },
      {
        thumbnail:"/Assets/shoes1/colors/White.avif",
        images:[
          "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/2f50c95972ff477499fb1c52cf7a7284_9366/Response_Runner_Shoes_White_IH3581_01_standard.jpg",
          "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/ab18f541711c41b78c815a45563ca3fa_9366/Response_Runner_Shoes_White_IH3581_02_standard_hover.jpg",
          "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/e62e37c5ee4b43d0b3e0e6706772bef5_9366/Response_Runner_Shoes_White_IH3581_03_standard.jpg",
          "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/4f48926ab8924ab586d9771cb83c9f3d_9366/Response_Runner_Shoes_White_IH3581_04_standard.jpg"
        ]
      }
    ]
  },
  shoe2: {
    typeofprod:"Sportswear",
    prodprice:"₹3679.50",
    prodname:"ADILETTE COMFORT SLIDES",
    colors:[
      {
        thumbnail: "/Assets/shoe2/colors/black-white.avif",
        video: "https://assets.adidas.com/videos/ar_1,w_720,c_fill,q_auto,f_auto/f12a545006e34c7790d5aecedc6cf371_d98c/Adilette_Comfort_Slides_Black_GY1945_video.mp4",
        images:[
            "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/c8f3d40b18994713a770ae7001746249_9366/Adilette_Comfort_Slides_Black_GY1945_01_00_standard.jpg",
            "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/d0db20a0269346e5bfe4ae7001750008_9366/Adilette_Comfort_Slides_Black_GY1945_02_standard_hover.jpg",
            "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/de19371320604668bc8bae700174d9f9_9366/Adilette_Comfort_Slides_Black_GY1945_03_standard.jpg"
          ]
    },
    {
      thumbnail:"/Assets/shoe2/colors/navy-blue.avif",
      images:[
        "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/8a4b202dd7f6474f9278af4700817e36_9366/Adilette_Comfort_Slides_Blue_H03616_01_standard.jpg",
        "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/fe814dce81d44cdab901af4700819aec_9366/Adilette_Comfort_Slides_Blue_H03616_02_standard_hover.jpg",
        "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/f9bdb1231d524d938595af470081a1ee_9366/Adilette_Comfort_Slides_Blue_H03616_03_standard.jpg",
        "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/29c6db28a085430db3d2af470081ad31_9366/Adilette_Comfort_Slides_Blue_H03616_04_standard.jpg"
      ]
    },
    {
      thumbnail:"/Assets/shoe2/colors/black-army.avif",
      images:[
        "/Assets/shoe2/pic1.avif",
        "/Assets/shoe2/pic2.avif",
        "/Assets/shoe2/pic3.avif",
        "/Assets/shoe2/pic4.avif"
      ]
      }
    ]
  },
  men0: {
    typeofprod:"Motorsport",
    prodname:"ADIDAS FEROZA MERCEDES AMG PETRONAS F1 TEAM SHOES",
    prodprice:"₹11 999.00",
    images: [
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/ba67c42900a245b48c87e3085c72af99_9366/ADIDAS_FEROZA_MERCEDES_AMG_PETRONAS_F1_TEAM_SHOES_Black_JQ3272_01_00_standard.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/ed920b182b95488091af1c797efc6f09_9366/ADIDAS_FEROZA_MERCEDES_AMG_PETRONAS_F1_TEAM_SHOES_Black_JQ3272_02_standard_hover.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/7c581c9a7fe44003b305cd9541fdb870_9366/ADIDAS_FEROZA_MERCEDES_AMG_PETRONAS_F1_TEAM_SHOES_Black_JQ3272_03_standard.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/50f53008917e45139bbecbf89a09e221_9366/ADIDAS_FEROZA_MERCEDES_AMG_PETRONAS_F1_TEAM_SHOES_Black_JQ3272_04_standard.jpg"
    ],
    colors: []
  },
  men1: {
    typeofprod:"Motorsport",
    prodname:"ADIDAS FEROZA MERCEDES AMG PETRONAS F1 TEAM DRIVER CAP",
    prodprice:"₹3299.00",
    images: [
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/9c6ddfc4a4be4ff4abc16ced38faee19_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_DRIVER_CAP_Turquoise_JW6268_HM1.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/aa6e074f05bd45dc8c1c74be87bdfc25_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_DRIVER_CAP_Turquoise_JW6268_HM3_hover.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/3ea03ce0fc4745beba395701bf4e3075_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_DRIVER_CAP_Turquoise_JW6268_HM4.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/db95c277a25549edb8c9715b83b8e074_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_DRIVER_CAP_Turquoise_JW6268_HM5.jpg"
    ],
    colors: []
  },
  women0: {
    typeofprod:"Women•Motorsport",
    prodname:"MERCEDES - AMG PETRONAS FORMULA ONE TEAM POLO",
    prodprice:"₹6 999.00",
    images: [
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/8c080f481bd74684a24c923d9978e716_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_POLO_Black_JX0759_21_model.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/c4c3d4a904fb416794570d20277b77fd_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_POLO_Black_JX0759_23_hover_model.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/ee258c90dc7b440eafcff8828f6974f9_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_POLO_Black_JX0759_25_model.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/20fb223ba1bb48cda8dfc2a937bbbae8_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_POLO_Black_JX0759_01_laydown.jpg"
    ],
    colors: []
  },
  women1: {
    typeofprod:"Women•Motorsport",
    prodname:"MERCEDES - AMG PETRONAS FORMULA ONE TEAM MECHANICS JERSEY",
    prodprice:"₹5 999.00",
    images: [
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/851a0178e98245eeab237ebd1c808bf1_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_MECHANICS_JERSEY_Black_JX8246_HM1.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/0f90720147a04e0084b7a788debae3d6_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_MECHANICS_JERSEY_Black_JX8246_HM3_hover.jpg",
      "https://assets.adidas.com/images/h_840,f_auto,q_auto,fl_lossy,c_fill,g_auto/b5d2bf845af74303b39612b772c8c153_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_MECHANICS_JERSEY_Black_JX8246_HM4.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/05a364f07cfc4b8099676c053b9837e8_9366/MERCEDES_-_AMG_PETRONAS_FORMULA_ONE_TEAM_MECHANICS_JERSEY_Black_JX8246_HM5.jpg"
    ],
    colors: []
  },
  kids0: {
    typeofprod:"Kids Unisex•Originals",
    prodname:"Samba OG Shoes Kids",
    prodprice:"₹4 999.00",
    images: [
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/c13c7ee28e8f4f81aa48dcaeca768878_9366/Samba_OG_Shoes_Kids_White_IE3679_01_00_standard.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/f3b74f4dd50e4010a921611e1028fe9c_9366/Samba_OG_Shoes_Kids_White_IE3679_02_standard.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/f6b384488c8640c4ab26477026bb5508_9366/Samba_OG_Shoes_Kids_White_IE3679_03_standard.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/228ab44f2e49435aac245a6c50099656_9366/Samba_OG_Shoes_Kids_White_IE3679_04_standard_hover.jpg"
    ],
    colors: [
      "https://assets.adidas.com/images/e_trim:EAEEEF/c_lpad,w_iw,h_ih/b_rgb:EAEEEF/w_180,f_auto,q_auto,fl_lossy,c_fill,g_auto/d2abeff355844d4085727d70d1d65273_9366/Samba_OG_Shoes_Kids_White_IE3679_00_plp_standard.jpg",
      "https://assets.adidas.com/images/e_trim:EAEEEF/c_lpad,w_iw,h_ih/b_rgb:EAEEEF/w_180,f_auto,q_auto,fl_lossy,c_fill,g_auto/dbff47717b2a41cfb00474e39ffdd02e_9366/Samba_OG_Shoes_Kids_Black_IE3680_00_plp_standard.jpg"
    ]
  },
  kids1: {
    typeofprod:"Kids Unisex•Football",
    prodname:"Real Madrid 25/26 Home Jersey Kids",
    prodprice:"₹3 999.00",
    images: [
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/83cde0fe29f04be1b30e9fae69a85c17_9366/Real_Madrid_25-26_Home_Jersey_Kids_White_JN8887_21_model.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/5b03d357ab074b1b8d56ee9d65c23c2e_9366/Real_Madrid_25-26_Home_Jersey_Kids_White_JN8887_23_hover_model.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/5a81487d494142ce856d2de28b8c2a79_9366/Real_Madrid_25-26_Home_Jersey_Kids_White_JN8887_25_model.jpg",
      "https://assets.adidas.com/images/h_2000,f_auto,q_auto,fl_lossy,c_fill,g_auto/6f329230ed954517a16dfecb8021d3a3_9366/Real_Madrid_25-26_Home_Jersey_Kids_White_JN8887_01_laydown.jpg"
    ],
    colors: [
      "https://assets.adidas.com/images/e_trim:EAEEEF/c_lpad,w_iw,h_ih/b_rgb:EAEEEF/w_180,f_auto,q_auto,fl_lossy,c_fill,g_auto/d2abeff355844d4085727d70d1d65273_9366/Samba_OG_Shoes_Kids_White_IE3679_00_plp_standard.jpg",
      "https://assets.adidas.com/images/e_trim:EAEEEF/c_lpad,w_iw,h_ih/b_rgb:EAEEEF/w_180,f_auto,q_auto,fl_lossy,c_fill,g_auto/dbff47717b2a41cfb00474e39ffdd02e_9366/Samba_OG_Shoes_Kids_Black_IE3680_00_plp_standard.jpg"
    ]
  }
  
};

const selectedShoe = localStorage.getItem('selectedShoe');
const product = products[selectedShoe];
const imageElements = document.querySelectorAll('.prodimg');
const video = document.getElementById('prodvideo');
const fourthimage = document.getElementById('prodimg4');

// Set title, price, type
document.getElementById('typeofprod').textContent = product.typeofprod;
document.getElementById('prodname').textContent = product.prodname;
document.getElementById('prodprice').textContent = product.prodprice;

// Setup color selection
const colorContainer = document.getElementById('colorgrid');
const colors = product.colors;

if (colors.length > 0) {
  colors.forEach((colorOption, index) => {
    const color = document.createElement('img');
    color.src = colorOption.thumbnail;
    color.alt = 'color option';
    color.style.cursor = 'pointer';

    color.addEventListener('click', () => {
    const newImages = colorOption.images;

    if (!Array.isArray(newImages)) {
      console.warn("No images defined for this color option.");
      return;
    }

    newImages.forEach((src, idx) => {
      if (imageElements[idx]) {
        imageElements[idx].src = src;
      }
    });

    // ✅ Check if this color has a video
    if (colorOption.video) {
      video.src = colorOption.video;
      video.removeAttribute('hidden');
      fourthimage.setAttribute('hidden', '');
    } else {
      video.setAttribute('hidden', '');
      fourthimage.removeAttribute('hidden');
    }
  });

    colorContainer.appendChild(color);
  });

  // Load first color's images by default
  const defaultImages = colors[0].images;
  defaultImages.forEach((src, idx) => {
    if (imageElements[idx]) {
      imageElements[idx].src = src;
    }
  });

  if (colors[0].video) {
    video.src = colors[0].video;
    video.removeAttribute('hidden');
    fourthimage.setAttribute('hidden', '');
  } else {
    video.setAttribute('hidden', '');
    fourthimage.removeAttribute('hidden');
  }

  // Load video by default if it's shoe1 and color index 0
  if (selectedShoe === "shoe1" && product.video) {
    video.src = product.video;
    video.removeAttribute('hidden');
    fourthimage.setAttribute('hidden', '');
  }
} else {
  document.getElementById('color-section').setAttribute('hidden', '');

  // fallback to top-level images
  product.images.forEach((src, index) => {
    if (imageElements[index]) {
      imageElements[index].src = src;
    }
  });

  video.setAttribute('hidden', '');
  fourthimage.removeAttribute('hidden');
}

// Wishlist functionality
const likeBtn = document.querySelector('.likebtn');
if (likeBtn) {
  likeBtn.addEventListener('click', () => {
    const wishlistItem = {
      name: product.prodname,
      price: product.prodprice,
      image: (product.colors && product.colors.length > 0)
        ? product.colors[0].images[0]
        : product.images[0]
    };

    let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
    const exists = wishlist.some(item => item.name === wishlistItem.name && item.image === wishlistItem.image);
    if (!exists) {
      wishlist.push(wishlistItem);
      localStorage.setItem('wishlist', JSON.stringify(wishlist));
      alert("Added to wishlist!");
    } else {
      alert("Already in wishlist!");
    }
  });
}

// Add to Bag functionality
const addToBagBtn = document.querySelector('.add-to-bag');
if (addToBagBtn) {
  addToBagBtn.addEventListener('click', () => {
    const bagItem = {
      name: product.prodname,
      price: product.prodprice,
      image: (product.colors && product.colors.length > 0)
        ? product.colors[0].images[0]
        : product.images[0]
    };

    let bag = JSON.parse(localStorage.getItem('bag')) || [];
    const exists = bag.some(item => item.name === bagItem.name && item.image === bagItem.image);
    if (!exists) {
      bag.push(bagItem);
      localStorage.setItem('bag', JSON.stringify(bag));
      alert("Added to Bag!");
    } else {
      alert("Already in Bag!");
    }
  });
}

